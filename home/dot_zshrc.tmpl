# ~/.zshrc - managed by chezmoi
# vim: set ft=zsh:

# =============================================================================
# Source common shell config from .bashrc
# =============================================================================

[[ -f "$HOME/.bashrc" ]] && source "$HOME/.bashrc"

# =============================================================================
# Oh-My-Zsh Configuration
# =============================================================================
{{- if (index . "installZsh" | default false) }}

export ZSH="$HOME/.oh-my-zsh"

# Theme (disabled when using Starship)
{{- if (index . "installStarship" | default false) }}
ZSH_THEME=""
{{- else }}
ZSH_THEME="robbyrussell"
{{- end }}

# Plugins
plugins=(
    git
    docker
    docker-compose
    kubectl
    zsh-autosuggestions
    zsh-syntax-highlighting
    zsh-completions
)

# Load oh-my-zsh
[[ -f "$ZSH/oh-my-zsh.sh" ]] && source "$ZSH/oh-my-zsh.sh"
{{- end }}

# =============================================================================
# Zsh-specific Configuration
# =============================================================================

# Auto cd - type directory name to cd into it (no cd command needed)
setopt AUTO_CD

# Tab completion
autoload -Uz compinit && compinit
zstyle ':completion:*' menu select
zstyle ':completion:*' matcher-list 'm:{a-zA-Z}={A-Za-z}'

# History
HISTSIZE=50000
SAVEHIST=50000
HISTFILE="$HOME/.zsh_history"

setopt HIST_IGNORE_DUPS
setopt HIST_IGNORE_SPACE
setopt HIST_FIND_NO_DUPS
setopt SHARE_HISTORY
setopt EXTENDED_HISTORY

# =============================================================================
# Local Configuration
# =============================================================================

# Source local overrides if present
[[ -f "$HOME/.zshrc.local" ]] && source "$HOME/.zshrc.local"
